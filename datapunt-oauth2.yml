authorization_service:
  root: /oauth2
  host: localhost
  port: 8110

client_admin_service:
  root: /oauth2clients
  host: localhost
  port: 8111

authz_admin_service:
  root: /oauth2scopes
  host: localhost
  port: 8112

jwt:
  refreshtokens:
    secret: refresh_testsecret
    algorithm: HS256
    lifetime: ${JWT_LIFETIME:-43200}  # 12 Ã— 3600
  accesstokens:
    secret: access_testsecret
    algorithm: HS256
    lifetime: 300

postgres:
  host: ${DB_HOST:-localhost}
  port: ${DB_PORT:-5432}
  user: ${DB_USER:-oauth2}
  password: ${DB_PASS:-oauth2}
  dbname: ${DB_DATABASE:-oauth2}

idp:
  oauth2.idp.tma_oauth2:
    client_id: ${TMA_OAUTH2_CLIENT_ID}
    authorization_uri: ${TMA_OAUTH2_AUTHZ_URI}

logging:
  version: 1
  formatters:
    root:
      format: "%(asctime)s	%(name)s %(levelname)s (%(pathname)s/%(filename)s:%(funcName)s@%(lineno)d): %(message)s"
    auditlog:
      format: "%(asctime)s	%(name)s %(levelname)s (pid: %(process)d | ts: %(created)f) %(message)s"
    werkzeug:
      format: "%(asctime)s	%(name)s %(levelname)s: %(message)s"
  handlers:
    root:
      class : logging.StreamHandler
      formatter: root
    auditlog:
      class : logging.StreamHandler
      formatter: auditlog
    werkzeug:
      class : logging.StreamHandler
      formatter: werkzeug
  loggers:
    auditlog.authserver:
      level: DEBUG
      propagate: false
      handlers: [auditlog]
    werkzeug:
      propagate: false
      handlers: [werkzeug]
  root:
    level: ${LOGLEVEL:-DEBUG}
    handlers: [root]

datasets:
  HR:
    name: Handelsregister
    url: https://www.amsterdam.nl/stelselpedia/hr-index/
    scopes:
      GRNT:
        summary: Toegangsbeheer
        description: |-
            Mag de eigen toegangsrechten doorgeven aan anderen.
      RD:
        summary: Leestoegang
        description: |-
            Geeft onbeperkt leestoegang tot alle informatie.
        included_by: WT
      WT:
        summary: Schrijftoegang
        description: |-
            Heeft onbeperkt schrijftoegang tot alle informatie.
        includes: RD
