authorization_service:
  root_path: /oauth2
  bind_host: localhost
  bind_port: 8110
  idp_config:
    oauth2.idp.tma_oauth2:
      client_id: ${TMA_OAUTH2_CLIENT_ID}
      authorization_uri: ${TMA_OAUTH2_AUTHZ_URI}

client_admin_service:
  root_path: /oauth2clients
  bind_host: localhost
  bind_port: 8111

authz_admin_service:
  root_path: /oauth2scopes
  bind_host: localhost
  bind_port: 8112

jwt:
  refreshtokens:
    secret: refresh_testsecret
    algorithm: HS256
    lifetime: ${JWT_LIFETIME:-43200}  # 12 Ã— 3600
  accesstokens:
    secret: access_testsecret
    algorithm: HS256
    lifetime: 300

postgres:
  host: ${DB_HOST:-localhost}
  port: ${DB_PORT:-5432}
  user: ${DB_USER:-oauth2}
  password: ${DB_PASS:-oauth2}
  dbname: ${DB_DATABASE:-oauth2}

logging:
  version: 1
  formatters:
    default:
      format: '%(asctime)s oauth2 %(levelname)-8s %(module)s:%(lineno)d: %(message)s'
  handlers:
    console:
      class: logging.StreamHandler
      formatter: default
    aiohttp.access:
      class: logging.StreamHandler
  loggers:
    oauth2:
      propagate: true
    aiohttp.access:
      level: ${LOGLEVEL:-DEBUG}
      handlers: [aiohttp.access]
      propagate: false
    aiohttp:
      propagate: true
    aiohttp.*:
      propagate: true
    rest_utils:
      propagate: true
  root:
    level: ${LOGLEVEL:-DEBUG}
    handlers: [console]

datasets:
  CA:
    name: Datacatalogus Amsterdam
    describedby: 'https://data.amsterdam.nl/#?dsd=catalogus&dsp=1&dsv=CARDS&mpb=topografie'
    scopes:
      L1:
        name: Level 1
        included_by: L2
        description: |-
          TODO: beschrijven wat L1 meer heeft dan anoniem.
      L2:
        name: Level 2
        includes: L1
        description: |-
          TODO: beschrijven wat L2 meer heeft dan L1.
  HR:
    name: Handelsregister
    describedby: 'https://www.amsterdam.nl/stelselpedia/hr-index/'
    scopes:
      INF:
        name: Onbeperkt aantal bevragingen
        description: |-
          Deze permissie geeft gebruikers het recht onbeperkt informatie op te
          vragen (anonieme gebruikers mogen maximaal X [TODO --PvB] bevragingen
          per dag doen).
